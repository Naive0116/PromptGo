{
  "id": "OPENAI_GPT41_PROMPTING_GUIDE",
  "url": "https://cookbook.openai.com/examples/gpt4-1_prompting_guide",
  "type": "guide",
  "priority": "P0",
  "topic": "prompting",
  "tags": [
    "gpt41",
    "cot",
    "long_context",
    "prompt_structure",
    "delimiters",
    "instruction_following"
  ],
  "notes": "GPT-4.1 官方指南：CoT 推理策略、长上下文处理、Prompt 结构模板、分隔符最佳实践、指令遵循工作流",
  "content": "# GPT-4.1 Prompting Guide\n\nThe GPT-4.1 family of models represents a significant step forward from GPT-4o in capabilities across coding, instruction following, and long context.\n\n## 1. Agentic Workflows\n\nGPT-4.1 is a great place to build agentic workflows. Our agentic harness for the model achieves state-of-the-art performance for non-reasoning models on SWE-bench Verified, solving 55% of problems.\n\n## 2. Long Context\n\n### Optimal Context Size\nTuning Context Reliance and Prompt Organization are key for long context tasks.\n\n## 3. Chain of Thought\n\nGPT-4.1 is not a reasoning model, but prompting the model to think step by step (called \"chain of thought\") can be an effective way for a model to break down problems.\n\nRecommended basic chain-of-thought instruction:\n```\n... First, think carefully step by step about what documents are needed to answer the query. Then, print out the TITLE and ID of each document. Then, format the IDs into a list.\n```\n\nAdvanced CoT with Reasoning Strategy:\n```\n# Reasoning Strategy\n1. Query Analysis: Break down and analyze the query until you're confident about what it might be asking.\n2. Context Analysis: Carefully select and analyze a large set of potentially relevant documents.\n   Analysis steps for each:\n   a. Analysis: An analysis of how it may or may not be relevant.\n   b. Relevance rating: [high, medium, low, none]\n3. Synthesis: summarize which documents are most relevant and why.\n```\n\n## 4. Instruction Following\n\nGPT-4.1 exhibits outstanding instruction-following performance. Developers often extensively prompt for agentic reasoning steps, response tone and voice, tool calling information, output formatting, topics to avoid, and more.\n\n### Recommended Workflow\n1. Start with an overall \"Response Rules\" or \"Instructions\" section with high-level guidance and bullet points.\n2. If you'd like to change a more specific behavior, add a section to specify more details.\n3. If there are specific steps you'd like the model to follow, add an ordered list.\n4. Check for conflicting, underspecified, or wrong instructions.\n5. Add examples that demonstrate desired behavior.\n6. It's generally not necessary to use all-caps or other incentives like bribes or tips.\n\n### Common Failure Modes\n- Instructing a model to always follow a specific behavior can occasionally induce adverse effects.\n- When provided sample phrases, models can use those quotes verbatim and start to sound repetitive.\n- Without specific instructions, some models can be eager to provide additional prose.\n\n## 5. General Advice\n\n### Prompt Structure\n```\n# Role and Objective\n# Instructions\n## Sub-categories for more detailed instructions\n# Reasoning Steps\n# Output Format\n# Examples\n## Example 1\n# Context\n# Final instructions and prompt to think step by step\n```\n\n### Delimiters\n1. **Markdown**: Use markdown titles for major sections and subsections. Use inline backticks or backtick blocks for code.\n2. **XML**: These also perform well. XML is convenient to precisely wrap a section including start and end, add metadata to the tags.\n   Example: `<doc id='1' title='The Fox'>The quick brown fox jumps over the lazy dog</doc>`\n3. **JSON**: Highly structured but can be more verbose and require character escaping.",
  "chunks": [
    "# GPT-4.1 Prompting Guide\n\nThe GPT-4.1 family of models represents a significant step forward from GPT-4o in capabilities across coding, instruction following, and long context. GPT-4.1 is trained to follow instructions more closely and more literally than its predecessors.",
    "## Chain of Thought\n\nGPT-4.1 is not a reasoning model, but prompting the model to think step by step (called \"chain of thought\") can be an effective way for a model to break down problems. Recommended: First, think carefully step by step about what documents are needed to answer the query. Then, print out the TITLE and ID of each document.",
    "## Instruction Following\n\nGPT-4.1 exhibits outstanding instruction-following performance. Recommended Workflow: 1. Start with Response Rules section 2. Add specific behavior sections 3. Add ordered list for steps 4. Check for conflicting instructions 5. Add examples 6. Avoid all-caps or bribes.",
    "## Prompt Structure\n\n# Role and Objective\n# Instructions\n## Sub-categories for more detailed instructions\n# Reasoning Steps\n# Output Format\n# Examples\n# Context\n# Final instructions\n\n### Delimiters: Markdown (recommended), XML (precise wrapping), JSON (structured but verbose)"
  ],
  "fetched_at": "2026-01-29T10:26:00.000000"
}
